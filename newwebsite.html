<!DOCTYPE html>
<html lang="es-ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generador de sitios | UmanoAI</title>

  <style>
    :root {
      --bg: #020617;
      --bg-soft: #020617;
      --card: rgba(15, 23, 42, 0.97);
      --border: rgba(148, 163, 184, 0.5);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --accent: #0ea5e9;
      --accent-soft: rgba(56, 189, 248, 0.1);
      --danger: #f97373;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, sans-serif;
      color: var(--text-main);
      background:
        radial-gradient(circle at top, #0b1630 0, var(--bg-soft) 45%, var(--bg) 100%);
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      padding-top: 60px;
    }

    main {
      width: 100%;
      max-width: 860px;
      margin: 0 auto;
      padding: 0 12px;
    }

    .card {
      background: var(--card);
      border-radius: 22px;
      border: 1px solid var(--border);
      box-shadow: 0 22px 60px rgba(15, 23, 42, 0.8);
      padding: 26px 24px;
      margin-bottom: 40px;
    }

    .badge {
      display: inline-block;
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--accent-soft);
      border: 1px solid rgba(56, 189, 248, 0.3);
      color: #7dd3fc;
      margin-bottom: 8px;
    }

    form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
      margin-top: 30px;
    }

    .field { display: flex; flex-direction: column; }

    label {
      font-size: 0.8rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    input[type="text"],
    textarea {
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      padding: 9px 10px;
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
    }

    textarea { resize: vertical; }

    button.main-btn {
      border: none;
      border-radius: 999px;
      padding: 12px 26px;
      font-size: 1rem;
      cursor: pointer;
      background: linear-gradient(135deg, #22c55e, #4ade80);
      font-weight: 600;
      color: #051b06;
      grid-column: 1 / -1;
      margin-top: 10px;
      transition: opacity .15s ease, transform .15s ease;
    }

    button.main-btn:disabled {
      opacity: .6;
      transform: translateY(1px);
      cursor: default;
    }

    .status-text {
      grid-column: 1 / -1;
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 4px;
      min-height: 1em;
    }

    @media(max-width: 760px) {
      form { grid-template-columns: 1fr; }
    }

    #modal {
      position: fixed;
      top:0;left:0;right:0;bottom:0;
      background: rgba(0,0,0,.75);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:9999;
    }

    #previewFrame {
      width:90%;
      height:90%;
      border-radius:10px;
      background:white;
      border:none;
      box-shadow:0px 20px 50px rgba(0,0,0,0.4);
    }

    .close-btn {
      position:absolute;
      top:25px;
      right:25px;
      background:#ef4444;
      border:none;
      padding:10px 15px;
      border-radius:8px;
      color:white;
      cursor:pointer;
      font-size:14px;
      font-weight:600;
    }

  </style>
</head>
<body>

  <main>
    <div class="card">
      <div class="badge">Formulario interno</div>
      <h1>Crear sitio en 1 minuto</h1>

      <form id="siteForm">
        <div class="field">
          <label>Nombre del negocio</label>
          <input type="text" name="nombre_negocio" placeholder="Ej: Helader√≠a Bella Vista" required>
        </div>

        <div class="field">
          <label>T√≠tulo del sitio</label>
          <input type="text" name="titulo" placeholder="La mejor helader√≠a de tu barrio" required>
        </div>

        <div class="field">
          <label>WhatsApp</label>
          <input type="text" name="whatsapp" placeholder="5491133380000">
        </div>

        <div class="field" style="grid-column: 1 / -1;">
          <label>Descripci√≥n</label>
          <textarea name="descripcion" rows="4" placeholder="Descripci√≥n del negocio..." required></textarea>
        </div>

        <button type="button" class="main-btn" onclick="requestPreview()">üëÅ Previsualizar sitio</button>
        <div id="statusText" class="status-text"></div>
      </form>
    </div>
  </main>

  <div id="modal">
    <button class="close-btn" onclick="closePreview()">Cerrar</button>
    <iframe id="previewFrame"></iframe>
  </div>

  <script>
    const FLOW_URL = "TU_URL_DEL_FLOW";

    function requestPreview() {
      const form = document.getElementById("siteForm");

      const payload = {
        nombre_negocio: form.nombre_negocio.value,
        titulo: form.titulo.value,
        descripcion: form.descripcion.value,
        whatsapp: form.whatsapp.value
      };

      const btn = document.querySelector(".main-btn");
      const statusEl = document.getElementById("statusText");

      btn.disabled = true;
      btn.textContent = "‚è≥ Generando tu pr√≥ximo sitio‚Ä¶";
      statusEl.textContent = "Estamos armando tu sitio en autom√°tico üöÄ";

      fetch(FLOW_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      })
      .then(res => res.text())
      .then(html => {
        btn.disabled = false;
        btn.textContent = "üëÅ Previsualizar sitio";
        statusEl.textContent = "Listo! Ya pod√©s verlo üëá";

        showPreview(html);
      })
      .catch(() => {
        btn.disabled = false;
        btn.textContent = "üëÅ Previsualizar sitio";
        statusEl.textContent = "Error generando el sitio üòì";
      });
    }

    function showPreview(htmlGenerado) {
      const iframe = document.getElementById("previewFrame");
      const modal = document.getElementById("modal");
      const iframeDoc = iframe.contentDocument;

      iframeDoc.open();
      iframeDoc.write(htmlGenerado);
      iframeDoc.close();

      modal.style.display = "flex";
    }

    function closePreview() {
      document.getElementById("modal").style.display = "none";
    }
  </script>

</body>
</html>


